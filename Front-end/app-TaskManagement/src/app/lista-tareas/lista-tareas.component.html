<!-- Panel de filtros -->
<div class="filter-panel">
    <button routerLink="/tasks/created" class="btn btn-primary" id="btn-new-task">+ Nueva Tarea</button>
    <select class="select">
        <option>Filtro: Todas</option>
        <option>Filtro: Pendientes</option>
        <option>Filtro: Completadas</option>
    </select>
    <select class="select">
        <option>Categoría: Todas</option>
        <option>Categoría: Trabajo</option>
        <option>Categoría: Personal</option>
        <option>Categoría: Hogar</option>
    </select>
    <select class="select">
        <option>Etiqueta: Todas</option>
        <option>Etiqueta: Urgente</option>
        <option>Etiqueta: Compras</option>
    </select>
</div>

@for (tag of tags; track $index) {
    <p>{{tag.name}}</p>
}

<!-- Lista de tareas -->
@if (tareas) {

<table class="tasks-table" mat-table [dataSource]="tareas">

    <ng-container matColumnDef="Title">
        <th mat-header-cell *matHeaderCellDef> Título </th>
        <td class="task-title" mat-cell *matCellDef="let tarea"> {{ tarea.title }} </td>
    </ng-container>

    <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef> Descripción </th>
        <td class="task-title" mat-cell *matCellDef="let tarea"> {{ tarea.description }} </td>
    </ng-container>

    <ng-container matColumnDef="creation_date">
        <th mat-header-cell *matHeaderCellDef> Creada </th>
        <td mat-cell *matCellDef="let tarea"> {{ tarea.creation_date }} </td>
    </ng-container>

    <ng-container matColumnDef="expiration_date">
        <th mat-header-cell *matHeaderCellDef> Límite </th>
        <td mat-cell *matCellDef="let tarea"> {{ tarea.expiration_date }} </td>
    </ng-container>

    <ng-container matColumnDef="estado">
        <th mat-header-cell *matHeaderCellDef> Estado </th>
        <td mat-cell *matCellDef="let tarea">
            <input type="checkbox" class="task-checkbox" [checked]="tarea.completed">
        </td>
    </ng-container>

    <ng-container matColumnDef="tasksTags">
        <th mat-header-cell *matHeaderCellDef> Prioridad </th>
        <td mat-cell *matCellDef="let tarea">
            <span class="priority-badge priority-high" *ngFor="let cat of tarea.tasksTags; let last = last">
                {{ cat.tags.name }}<span *ngIf="!last">, </span>
            </span>
        </td>
    </ng-container>

    <ng-container matColumnDef="accciones">
        <th mat-header-cell *matHeaderCellDef> Acciones </th>
        <td class="actions" mat-cell *matCellDef="let tarea">
            <button class="btn btn-secondary edit-btn" [attr.data-task]="tarea.id">Editar</button>
            <button class="btn btn-danger">Eliminar</button>
        </td>
    </ng-container>


    <tr mat-header-row *matHeaderRowDef="columnasAmostras"></tr>
    <tr mat-row *matRowDef="let row; columns: columnasAmostras;"></tr>
</table>
}
