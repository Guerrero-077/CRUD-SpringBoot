<div class="detail-header" id="form-title">Crear tarea</div>


<div id="task-detail-1" class="task-detail">

    <form (submit)="guardar()" [formGroup]="form">
        <div class="detail-section">
            <div class="info-box">
                <div class="info-field">
                    <div class="info-label">Título:</div>
                    <input type="text" class="info-input" id="task-title" value="Comprar leche"
                        [formControl]="form.controls.title" matInput required>
                </div>

                <div class="info-field">
                    <div class="info-label">Descripción:</div>
                    <input type="text" class="info-input" id="task-description" value="Ir al supermercado"
                        [formControl]="form.controls.description" matInput required>
                </div>

                <div class="info-field">
                    <div class="info-label">Fecha creación:</div>
                    <div id="creation-date">2025-03-09</div>
                </div>

                <div class="info-field">
                    <div class="info-label">Fecha límite:</div>
                    <input type="date" class="info-input" id="task-deadline"
                        [formControl]="form.controls.expiration_date" required>
                </div>

                <div class="info-field">
                    <div class="info-label">Prioridad:</div>
                    <mat-form-field>
                        <mat-label>Priorities</mat-label>
                        <mat-select [formControl]="form.controls.priority_id">
                            @for (prioritie of priorities; track $index) {
                            <mat-option [value]="prioritie.id">{{ prioritie.name }}</mat-option>
                            }
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>


            <div class="detail-section">
                <div class="section-title">
                    <span>Subtareas:</span>
                    <button class="btn btn-primary" id="btn-add-subtask">+ Añadir Subtarea</button>
                </div>
                <section class="example-section">
                    <!-- <span class="example-list-section"> -->
                    <!-- <mat-checkbox class="example-margin" [checked]="task().completed"
                            [indeterminate]="partiallyComplete()" (change)="update($event.checked)">
                            {{task().name}}
                        </mat-checkbox>
                    </span> -->
                    <span class="example-list-section">
                        <ul style="list-style: none; padding: 0; margin: 0;">
                            @for (subtask of subTasks; track $index) {
                            <li class="example-list-item">
                                <mat-checkbox>
                                    {{subtask.title}}
                                </mat-checkbox>
                            </li>
                            }
                        </ul>
                    </span>
                </section>
            </div>


            <div class="detail-section">
                <div class="tag-container">
                    <div class="tag-group">
                        <div class="section-title">Categorías:</div>
                        <span class="example-list-section">
                            <ul style="list-style: none; padding: 0; margin: 0;">
                                @for (categorie of categories; track $index) {
                                <li class="example-list-item">
                                    <mat-checkbox>
                                        {{categorie.name}}
                                    </mat-checkbox>
                                </li>
                                }
                            </ul>
                        </span>
                    </div>

                    <!-- Etiquetas -->
                    <div class="tag-group">
                        <div class="section-title">Etiquetas:</div>
                        <div id="tags-container">
                            <span class="example-list-section">
                                <ul style="list-style: none; padding: 0; margin: 0;">
                                    @for (tag of tags; track $index) {
                                    <li class="example-list-item">
                                        <mat-checkbox>
                                            {{tag.name}}
                                        </mat-checkbox>
                                    </li>
                                    }
                                </ul>
                            </span>
                        </div>

                        <!-- Botón para abrir el menú -->
                        <button class="btn btn-secondary" id="btn-add-tag">+ Nueva Etiqueta</button>

                        <!-- Menú emergente para añadir etiquetas -->
                        <div id="tag-menu" class="tag-menu" style="display: none;">
                            <input type="text" id="new-tag-input" placeholder="Ingrese una etiqueta">
                            <button class="btn btn-primary" id="btn-save-tag">Guardar Etiqueta</button>
                        </div>
                    </div>

                </div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-primary" type="submit" mat-flat-button>Guardar</button>
                <a class="btn btn-secondary" mat-stroked-button routerLink="/">Cancelar</a>
            </div>
        </div>

    </form>
</div>